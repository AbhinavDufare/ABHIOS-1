<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WebOS</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(156, 163, 175, 0.5); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(156, 163, 175, 0.8); }

        .glass {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .dark .glass {
            background: rgba(30, 30, 30, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Animation for window opening */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .window-anim { animation: popIn 0.15s ease-out forwards; }
    </style>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        system: {
                            red: '#FF5F57',
                            yellow: '#FEBC2E',
                            green: '#28C840'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- ICONS (SVGs) ---
        const Icon = ({ path, size = 24, className = "", fill="none", stroke="currentColor" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke={stroke} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Apple: (props) => <Icon {...props} fill="currentColor" stroke="none" path={<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>} />,
            Folder: (props) => <Icon {...props} path={<><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" /></>} />,
            Terminal: (props) => <Icon {...props} path={<><polyline points="4 17 10 11 4 5" /><line x1="12" y1="19" x2="20" y2="19" /></>} />,
            Globe: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10" /><line x1="2" y1="12" x2="22" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" /></>} />,
            Settings: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="3" /><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" /></>} />,
            Calculator: (props) => <Icon {...props} path={<><rect x="4" y="2" width="16" height="20" rx="2" strokeWidth="2" /><line x1="8" y1="6" x2="16" y2="6" strokeWidth="2" /><line x1="16" y1="14" x2="16" y2="14" strokeWidth="2" /><line x1="8" y1="14" x2="8" y2="14" strokeWidth="2" /><line x1="12" y1="14" x2="12" y2="14" strokeWidth="2" /><line x1="8" y1="18" x2="8" y2="18" strokeWidth="2" /><line x1="12" y1="18" x2="12" y2="18" strokeWidth="2" /><line x1="16" y1="18" x2="16" y2="18" strokeWidth="2" /></>} />,
            Note: (props) => <Icon {...props} path={<><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><polyline points="10 9 9 9 8 9" /></>} />,
            X: (props) => <Icon {...props} path={<><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></>} />,
            Minus: (props) => <Icon {...props} path={<line x1="5" y1="12" x2="19" y2="12" />} />,
            Maximize: (props) => <Icon {...props} path={<><polyline points="15 3 21 3 21 9" /><polyline points="9 21 3 21 3 15" /><line x1="21" y1="3" x2="14" y2="10" /><line x1="3" y1="21" x2="10" y2="14" /></>} />,
            Battery: (props) => <Icon {...props} path={<><rect x="1" y="6" width="18" height="12" rx="2" ry="2" /><line x1="23" y1="13" x2="23" y2="11" /></>} />,
            Wifi: (props) => <Icon {...props} path={<><path d="M5 12.55a11 11 0 0 1 14.08 0" /><path d="M1.42 9a16 16 0 0 1 21.16 0" /><path d="M8.53 16.11a6 6 0 0 1 6.95 0" /><line x1="12" y1="20" x2="12.01" y2="20" /></>} />,
            Search: (props) => <Icon {...props} path={<><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></>} />,
        };

        // --- APPS CONTENT ---

        // 1. File Manager
        const FileManager = () => (
            <div className="flex h-full text-sm">
                <div className="w-40 bg-gray-50 dark:bg-gray-800 border-r dark:border-gray-700 p-2 space-y-1">
                    <div className="px-2 py-1 text-xs font-bold text-gray-400">Favorites</div>
                    {['Desktop', 'Documents', 'Downloads', 'Pictures', 'Music'].map(i => (
                        <div key={i} className="flex items-center gap-2 px-2 py-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer text-gray-700 dark:text-gray-300">
                            <Icons.Folder size={16} className="text-blue-500" fill="currentColor"/> {i}
                        </div>
                    ))}
                </div>
                <div className="flex-1 bg-white dark:bg-[#1e1e1e] p-4">
                    <div className="grid grid-cols-4 gap-4">
                        {['Project A', 'Budget.xlsx', 'Photo.jpg', 'Notes.txt', 'Script.js'].map(f => (
                            <div key={f} className="flex flex-col items-center gap-2 p-2 hover:bg-blue-50 dark:hover:bg-white/10 rounded cursor-pointer group">
                                <Icons.Folder size={40} className="text-blue-400 group-hover:text-blue-500" fill="currentColor"/>
                                <span className="text-xs text-center dark:text-gray-200">{f}</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // 2. Terminal
        const TerminalApp = () => {
            const [history, setHistory] = useState(["Welcome to WebOS 1.0", "Type 'help' for commands."]);
            const [input, setInput] = useState("");
            const bottomRef = useRef(null);

            useEffect(() => bottomRef.current?.scrollIntoView({ behavior: 'smooth' }), [history]);

            const handleCommand = (e) => {
                if (e.key === 'Enter') {
                    const cmd = input.trim().toLowerCase();
                    const newHistory = [...history, `user@webos:~$ ${input}`];
                    
                    if (cmd === 'help') newHistory.push("Available: help, clear, date, echo [text]");
                    else if (cmd === 'clear') return setHistory([]);
                    else if (cmd === 'date') newHistory.push(new Date().toString());
                    else if (cmd.startsWith('echo ')) newHistory.push(cmd.slice(5));
                    else if (cmd !== '') newHistory.push(`Command not found: ${cmd}`);
                    
                    setHistory(newHistory);
                    setInput("");
                }
            }

            return (
                <div className="h-full bg-black text-green-400 p-4 font-mono text-sm overflow-auto" onClick={()=>document.getElementById('term-input').focus()}>
                    {history.map((line, i) => <div key={i} className="mb-1">{line}</div>)}
                    <div className="flex gap-2">
                        <span className="text-blue-400">user@webos:~$</span>
                        <input id="term-input" type="text" value={input} onChange={e => setInput(e.target.value)} onKeyDown={handleCommand} className="flex-1 bg-transparent outline-none border-none text-green-400" autoComplete="off" autoFocus/>
                    </div>
                    <div ref={bottomRef}></div>
                </div>
            );
        };

        // 3. Calculator
        const CalculatorApp = () => {
            const [display, setDisplay] = useState('0');
            const btns = ['C', '/', '*', '-', '7', '8', '9', '+', '4', '5', '6', '=', '1', '2', '3', '0', '.'];
            
            const handleBtn = (v) => {
                if(v === 'C') setDisplay('0');
                else if(v === '=') {
                    try { setDisplay(eval(display).toString()) } catch { setDisplay('Error') }
                } else {
                    setDisplay(display === '0' ? v : display + v);
                }
            }

            return (
                <div className="h-full bg-gray-900 flex flex-col p-2">
                    <div className="bg-gray-800 text-white text-3xl p-4 text-right rounded mb-2 font-mono overflow-hidden">{display}</div>
                    <div className="grid grid-cols-4 gap-2 flex-1">
                        {btns.map(b => (
                            <button key={b} onClick={() => handleBtn(b)} 
                                className={`rounded text-xl font-bold hover:brightness-110 active:scale-95 transition-all
                                ${b === '=' ? 'row-span-2 bg-orange-500' : b === '0' ? 'col-span-2 bg-gray-600' : 'bg-gray-700 text-white'}
                                ${['/','*','-','+'].includes(b) ? 'bg-orange-400' : ''}`}
                            >{b}</button>
                        ))}
                    </div>
                </div>
            )
        }

        // 4. Browser
        const BrowserApp = () => (
            <div className="h-full flex flex-col bg-white dark:bg-[#222]">
                <div className="flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#333] border-b dark:border-black">
                    <div className="flex gap-2 text-gray-400"><Icons.Minus size={16}/><Icons.Maximize size={16}/></div>
                    <input type="text" value="https://www.wikipedia.org" readOnly className="flex-1 bg-white dark:bg-[#111] dark:text-gray-300 px-3 py-1 rounded text-sm text-center outline-none"/>
                </div>
                <iframe src="https://en.wikipedia.org/wiki/Special:Random" className="flex-1 w-full border-none bg-white"/>
            </div>
        );

        // 5. Notes
        const NotesApp = () => {
            const [text, setText] = useState("Meeting notes:\n\n- Buy groceries\n- Finish code\n- Call Mom");
            return (
                <textarea 
                    className="w-full h-full p-4 resize-none outline-none bg-yellow-50 dark:bg-[#2d2d2d] text-gray-800 dark:text-gray-200 text-base leading-relaxed" 
                    value={text} onChange={(e) => setText(e.target.value)} spellCheck="false"
                ></textarea>
            )
        }

        // 6. Settings
        const SettingsApp = ({ isDark, toggleDark }) => (
            <div className="h-full bg-gray-50 dark:bg-[#1e1e1e] p-6 text-gray-800 dark:text-gray-200">
                <h2 className="text-2xl font-bold mb-6">System Preferences</h2>
                <div className="space-y-4">
                    <div className="flex items-center justify-between p-4 bg-white dark:bg-[#2c2c2c] rounded-lg shadow-sm">
                        <div className="flex items-center gap-3">
                            <div className="p-2 bg-blue-500 rounded text-white"><Icons.Globe size={20}/></div>
                            <span>Network</span>
                        </div>
                        <span className="text-green-500 text-sm font-bold">Connected</span>
                    </div>
                    
                    <div className="flex items-center justify-between p-4 bg-white dark:bg-[#2c2c2c] rounded-lg shadow-sm">
                        <div className="flex items-center gap-3">
                            <div className="p-2 bg-gray-700 rounded text-white"><Icons.Settings size={20}/></div>
                            <span>Dark Mode</span>
                        </div>
                        <button onClick={toggleDark} className={`w-12 h-6 rounded-full p-1 transition-colors ${isDark ? 'bg-green-500' : 'bg-gray-300'}`}>
                            <div className={`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ${isDark ? 'translate-x-6' : ''}`}></div>
                        </button>
                    </div>

                    <div className="flex items-center justify-between p-4 bg-white dark:bg-[#2c2c2c] rounded-lg shadow-sm">
                        <div className="flex items-center gap-3">
                            <div className="p-2 bg-purple-500 rounded text-white"><Icons.Search size={20}/></div>
                            <span>Wallpaper</span>
                        </div>
                        <span className="text-gray-400 text-sm">Default</span>
                    </div>
                </div>
            </div>
        )

        // --- WINDOW SYSTEM ---

        const DraggableWindow = ({ app, isOpen, isMinimized, onClose, onMinimize, isActive, zIndex, onFocus, isDark, toggleDark }) => {
            const [pos, setPos] = useState({ x: 100, y: 50 });
            const [size, setSize] = useState({ w: app.w, h: app.h });
            const [maximized, setMaximized] = useState(false);
            const [dragging, setDragging] = useState(false);
            const [offset, setOffset] = useState({ x: 0, y: 0 });
            const winRef = useRef(null);

            // Handle Drag
            useEffect(() => {
                const move = (e) => {
                    if (!dragging || maximized) return;
                    const cx = e.clientX || e.touches?.[0].clientX;
                    const cy = e.clientY || e.touches?.[0].clientY;
                    setPos({
                        x: Math.max(0, Math.min(window.innerWidth - 50, cx - offset.x)),
                        y: Math.max(30, Math.min(window.innerHeight - 50, cy - offset.y))
                    });
                };
                const stop = () => setDragging(false);

                if (dragging) {
                    window.addEventListener('mousemove', move);
                    window.addEventListener('mouseup', stop);
                    window.addEventListener('touchmove', move);
                    window.addEventListener('touchend', stop);
                }
                return () => {
                    window.removeEventListener('mousemove', move);
                    window.removeEventListener('mouseup', stop);
                    window.removeEventListener('touchmove', move);
                    window.removeEventListener('touchend', stop);
                }
            }, [dragging, offset, maximized]);

            const startDrag = (e) => {
                if (maximized) return;
                const cx = e.clientX || e.touches?.[0].clientX;
                const cy = e.clientY || e.touches?.[0].clientY;
                setOffset({ x: cx - pos.x, y: cy - pos.y });
                setDragging(true);
                onFocus(app.id);
            }

            if (!isOpen) return null;

            const currentStyle = maximized 
                ? { top: 32, left: 0, width: '100%', height: 'calc(100% - 32px)', borderRadius: 0 }
                : { top: pos.y, left: pos.x, width: size.w, height: size.h };

            return (
                <div 
                    ref={winRef}
                    style={{ ...currentStyle, zIndex, display: isMinimized ? 'none' : 'flex' }}
                    className={`fixed flex-col shadow-2xl overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-[#1e1e1e] transition-opacity window-anim ${isActive ? 'shadow-[0_0_20px_rgba(0,0,0,0.2)]' : 'opacity-90'}`}
                    onMouseDown={() => onFocus(app.id)}
                >
                    {/* Title Bar */}
                    <div 
                        className="h-9 bg-gray-100 dark:bg-[#2d2d2d] border-b border-gray-200 dark:border-black flex items-center px-3 select-none"
                        onMouseDown={startDrag}
                        onTouchStart={startDrag}
                        onDoubleClick={() => setMaximized(!maximized)}
                    >
                        <div className="flex gap-2">
                            <button onClick={() => onClose(app.id)} className="w-3 h-3 rounded-full bg-system-red hover:brightness-90 flex items-center justify-center group"><Icons.X size={8} className="opacity-0 group-hover:opacity-100 text-black/50" /></button>
                            <button onClick={() => onMinimize(app.id)} className="w-3 h-3 rounded-full bg-system-yellow hover:brightness-90 flex items-center justify-center group"><Icons.Minus size={8} className="opacity-0 group-hover:opacity-100 text-black/50" /></button>
                            <button onClick={() => setMaximized(!maximized)} className="w-3 h-3 rounded-full bg-system-green hover:brightness-90 flex items-center justify-center group"><Icons.Maximize size={8} className="opacity-0 group-hover:opacity-100 text-black/50" /></button>
                        </div>
                        <div className="flex-1 text-center text-xs font-semibold text-gray-600 dark:text-gray-300">{app.name}</div>
                        <div className="w-12"></div>
                    </div>
                    {/* Content */}
                    <div className="flex-1 overflow-auto relative bg-white dark:bg-[#1e1e1e]">
                        {app.id === 'files' && <FileManager />}
                        {app.id === 'term' && <TerminalApp />}
                        {app.id === 'calc' && <CalculatorApp />}
                        {app.id === 'web' && <BrowserApp />}
                        {app.id === 'notes' && <NotesApp />}
                        {app.id === 'settings' && <SettingsApp isDark={isDark} toggleDark={toggleDark} />}
                    </div>
                </div>
            )
        };

        // --- MAIN OS COMPONENT ---
        const OS = () => {
            const [time, setTime] = useState(new Date());
            const [openApps, setOpenApps] = useState([]);
            const [minimized, setMinimized] = useState([]);
            const [active, setActive] = useState(null);
            const [zCounter, setZ] = useState(10);
            const [isDark, setIsDark] = useState(false);

            useEffect(() => {
                const t = setInterval(() => setTime(new Date()), 1000);
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) setIsDark(true);
                return () => clearInterval(t);
            }, []);

            useEffect(() => {
                if(isDark) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            }, [isDark]);

            const apps = [
                { id: 'files', name: 'Finder', icon: <Icons.Folder className="text-blue-500 fill-blue-500" size={32} />, w: 600, h: 400 },
                { id: 'web', name: 'Safari', icon: <Icons.Globe className="text-blue-400" size={32} />, w: 800, h: 500 },
                { id: 'term', name: 'Terminal', icon: <div className="bg-gray-800 rounded p-1"><Icons.Terminal className="text-white" size={24} /></div>, w: 500, h: 350 },
                { id: 'notes', name: 'Notes', icon: <div className="bg-yellow-400 rounded p-1"><Icons.Note className="text-white" size={24} /></div>, w: 400, h: 500 },
                { id: 'calc', name: 'Calculator', icon: <div className="bg-gray-600 rounded p-1"><Icons.Calculator className="text-white" size={24} /></div>, w: 260, h: 380 },
                { id: 'settings', name: 'Settings', icon: <div className="bg-gray-400 rounded p-1"><Icons.Settings className="text-white" size={24} /></div>, w: 600, h: 400 },
            ];

            const launch = (id) => {
                if (minimized.includes(id)) {
                    setMinimized(minimized.filter(m => m !== id));
                    bringToFront(id);
                    return;
                }
                if (openApps.includes(id)) {
                    bringToFront(id);
                    return;
                }
                setOpenApps([...openApps, id]);
                bringToFront(id);
            };

            const close = (id) => {
                setOpenApps(openApps.filter(app => app !== id));
                setMinimized(minimized.filter(m => m !== id));
            };

            const minimize = (id) => {
                setMinimized([...minimized, id]);
                setActive(null);
            };

            const bringToFront = (id) => {
                setActive(id);
                setZ(z => z + 1);
            };

            // Calculate z-index for a specific app
            const getZ = (id) => active === id ? zCounter : 10;

            return (
                <div 
                    className="h-screen w-screen overflow-hidden bg-cover bg-center relative font-sans text-sm"
                    style={{ backgroundImage: `url(${isDark ? 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2000' : 'https://images.unsplash.com/photo-1493246507139-91e8fad9978e?q=80&w=2000'})` }}
                >
                    {/* Top Bar */}
                    <div className="fixed top-0 w-full h-8 glass flex items-center justify-between px-4 z-50 text-gray-800 dark:text-gray-100 shadow-sm">
                        <div className="flex items-center gap-4">
                            <Icons.Apple size={16} />
                            <span className="font-semibold hidden sm:inline">WebOS</span>
                            <span className="hidden sm:inline hover:bg-black/5 px-2 rounded cursor-default">File</span>
                            <span className="hidden sm:inline hover:bg-black/5 px-2 rounded cursor-default">Edit</span>
                            <span className="hidden sm:inline hover:bg-black/5 px-2 rounded cursor-default">View</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <Icons.Wifi size={16} />
                            <Icons.Search size={16} />
                            <div className="font-medium">
                                {time.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}
                                <span className="mx-2">{time.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                            </div>
                        </div>
                    </div>

                    {/* Desktop Area */}
                    <div className="w-full h-full pt-8 relative" onClick={() => setActive(null)}>
                        {/* Render Windows */}
                        {apps.map(app => (
                            <DraggableWindow 
                                key={app.id} 
                                app={app} 
                                isOpen={openApps.includes(app.id)}
                                isMinimized={minimized.includes(app.id)}
                                isActive={active === app.id}
                                zIndex={active === app.id ? zCounter : 1}
                                onClose={close}
                                onMinimize={minimize}
                                onFocus={bringToFront}
                                isDark={isDark}
                                toggleDark={() => setIsDark(!isDark)}
                            />
                        ))}
                    </div>

                    {/* Dock */}
                    <div className="fixed bottom-4 left-0 right-0 flex justify-center z-[9999]">
                        <div className="glass px-4 py-2 rounded-2xl flex gap-3 items-end shadow-2xl scale-100 origin-bottom duration-200">
                            {apps.map(app => {
                                const isOpen = openApps.includes(app.id);
                                return (
                                    <div key={app.id} className="relative group flex flex-col items-center">
                                        {/* Tooltip */}
                                        <div className="absolute -top-10 bg-gray-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                            {app.name}
                                        </div>
                                        
                                        {/* Icon */}
                                        <button 
                                            onClick={() => launch(app.id)}
                                            className="w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-110 active:scale-90 bg-white/10"
                                        >
                                            {app.icon}
                                        </button>
                                        
                                        {/* Active Dot */}
                                        <div className={`w-1 h-1 bg-black dark:bg-white rounded-full mt-1 transition-opacity ${isOpen ? 'opacity-100' : 'opacity-0'}`}></div>
                                    </div>
                                )
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OS />);
    </script>
</body>
</html>